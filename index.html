<!DOCTYPE html>
<html>
    <style>
        body{
            font-size: 200%;
            font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .field{
            text-decoration: none;
        }
    </style>
<head>
    <title>Minesweeper</title>
</head>
<body>
    <div id = "root"></div>

    <script type="module">
       import init, { getState } from "./pkg/minesweeper.js";

        async function main(){
            await init();

            render(getState());
        }

        function render(state) {
            let root = document.getElementById("root");
            root.innerHTML =  "";

            let data = state.split("\n").map(row => row.trim().split(/\s+/));

            for (let y = 0; y < data.length; y++){
                for (let x = 0; x < data[y].length; x++){
                    let element = document.createElement("a");
                    element.classList.add("field");
                    element.href = "#";
                    element.innerText = data[y][x];

                    root.appendChild(element);
                }
            }
        }

        main();

    </script>
</body>
</html>